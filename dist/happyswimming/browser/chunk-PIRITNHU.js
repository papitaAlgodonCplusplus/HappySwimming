import{a as R,b as k,c as F,d as z,e as D,f as A,g as q,h as V,i as j}from"./chunk-7HG5OZWZ.js";import{a as G,b as H,c as J}from"./chunk-KTSKPA5G.js";import{E as n,I as M,J as a,L as i,M as o,N as v,R as w,S as P,T as r,U as d,V as _,W as C,Y as g,Z as m,_ as c,aa as x,ca as l,da as s,ha as W,la as O,ma as N,oa as L,p as y,r as S,ta as E,va as B,ya as T,za as I}from"./chunk-NQECP3SB.js";function K(f,b){if(f&1&&(i(0,"div",57),r(1),o()),f&2){let u=P();n(),_(" ",u.errorMessage," ")}}function Q(f,b){if(f&1&&(i(0,"option",58),r(1),o()),f&2){let u=b.$implicit;a("value",u.code),n(),C("",u.code," - ",u.description,"")}}function U(f,b){f&1&&(i(0,"span"),r(1),l(2,"translate"),o()),f&2&&(n(),d(s(2,1,"registration.register")))}function X(f,b){f&1&&(i(0,"span"),r(1),l(2,"translate"),o()),f&2&&(n(),d(s(2,1,"registerFreeProfessional.processing")))}var pe=(()=>{class f{externalOption="outsourcing";identificationNumber="";companyName="";firstName="";lastName1="";lastName2="";address="";postalCode="";city="";country="";phoneFixed="";phoneMobile="";email="";password="";confirmPassword="";website="";plCode="";acceptTerms=!1;isLoading=!1;errorMessage="";plCodes=[];langSubscription=null;loadedSubscription=null;translationService=y(G);authService=y(I);cdr=y(W);router=y(B);route=y(E);ngOnInit(){this.route.params.subscribe(u=>{if(u.type==="client")this.externalOption="outsourcing";else if(u.type==="professional")this.externalOption="insourcing";else{this.router.navigate(["/register"]);return}this.cdr.detectChanges()}),this.authService.getPlCodes().subscribe({next:u=>{this.plCodes=u,this.cdr.detectChanges()},error:u=>{console.error("Error loading PL codes:",u)}}),this.langSubscription=this.translationService.getCurrentLang().subscribe(()=>{this.cdr.detectChanges()}),this.loadedSubscription=this.translationService.isTranslationsLoaded().subscribe(u=>{u&&this.cdr.detectChanges()})}validateForm(){return this.errorMessage="",!this.firstName||!this.lastName1||!this.identificationNumber||!this.address||!this.postalCode||!this.city||!this.country||!this.phoneMobile||!this.email||!this.password||!this.confirmPassword?(this.errorMessage=this.translationService.translate("registration.errorRequiredFields"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?this.password!==this.confirmPassword?(this.errorMessage=this.translationService.translate("registration.errorPasswordsMatch"),!1):this.password.length<8?(this.errorMessage=this.translationService.translate("registration.errorPasswordLength"),!1):this.acceptTerms?!0:(this.errorMessage=this.translationService.translate("registration.errorTerms"),!1):(this.errorMessage=this.translationService.translate("registration.errorInvalidEmail"),!1)}onSubmit(){if(!this.validateForm()){this.cdr.detectChanges();return}this.isLoading=!0,this.cdr.detectChanges();let u={email:this.email,password:this.password,firstName:this.firstName,lastName1:this.lastName1,lastName2:this.lastName2||void 0,companyName:this.companyName||void 0,identificationNumber:this.identificationNumber,address:this.address,postalCode:this.postalCode,city:this.city,country:this.country,phoneFixed:this.phoneFixed||void 0,phoneMobile:this.phoneMobile,website:this.website||void 0,plCode:this.plCode||void 0,isOutsourcing:this.externalOption==="outsourcing"};this.authService.registerClient(u).subscribe({next:h=>{console.log("Client registration successful",h),this.isLoading=!1,this.router.navigate(["/auth"],{queryParams:{registered:"success"}})},error:h=>{console.error("Client registration failed",h),this.isLoading=!1,this.errorMessage=h.error?.message||this.translationService.translate("registration.errorGeneric"),this.cdr.detectChanges()}})}cancel(){this.router.navigate(["/register"])}ngOnDestroy(){this.langSubscription&&this.langSubscription.unsubscribe(),this.loadedSubscription&&this.loadedSubscription.unsubscribe()}static \u0275fac=function(h){return new(h||f)};static \u0275cmp=S({type:f,selectors:[["app-register"]],standalone:!0,features:[x],decls:150,vars:124,consts:[[1,"register-container"],[1,"register-content"],[1,"title"],["class","error-message",4,"ngIf"],[1,"client-type-selector"],[1,"radio-group"],["type","radio","id","outsourcing",3,"ngModelChange","value","ngModel","disabled"],["for","outsourcing"],["type","radio","id","insourcing",3,"ngModelChange","value","ngModel","disabled"],["for","insourcing"],[1,"form-row"],[1,"form-group"],["for","identificationNumber"],[1,"required"],["type","text","id","identificationNumber",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-group","wide"],["for","companyName"],["type","text","id","companyName",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","firstName"],["type","text","id","firstName",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","lastName1"],["type","text","id","lastName1",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","lastName2"],["type","text","id","lastName2",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","address"],["type","text","id","address",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","postalCode"],["type","text","id","postalCode",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","city"],["type","text","id","city",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","country"],["type","text","id","country",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","phoneFixed"],["type","tel","id","phoneFixed",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","phoneMobile"],["type","tel","id","phoneMobile",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","website"],["type","url","id","website",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","plCode"],["id","plCode",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"terms-container"],[1,"terms-checkbox"],["type","checkbox","id","acceptTerms",3,"ngModelChange","ngModel","disabled"],["for","acceptTerms"],[1,"lopd-text"],[1,"button-container"],[1,"btn","btn-cancel",3,"click","disabled"],[1,"btn","btn-register",3,"click","disabled"],[4,"ngIf"],[1,"error-message"],[3,"value"]],template:function(h,e){h&1&&(v(0,"app-header"),i(1,"div",0)(2,"div",1)(3,"h1",2),r(4),l(5,"translate"),o(),M(6,K,2,1,"div",3),i(7,"div",4)(8,"div",5)(9,"input",6),c("ngModelChange",function(t){return m(e.externalOption,t)||(e.externalOption=t),t}),o(),i(10,"label",7),r(11),l(12,"translate"),l(13,"translate"),o()(),i(14,"div",5)(15,"input",8),c("ngModelChange",function(t){return m(e.externalOption,t)||(e.externalOption=t),t}),o(),i(16,"label",9),r(17),l(18,"translate"),l(19,"translate"),o()()(),i(20,"div",10)(21,"div",11)(22,"label",12),r(23),l(24,"translate"),i(25,"span",13),r(26,"*"),o()(),i(27,"input",14),c("ngModelChange",function(t){return m(e.identificationNumber,t)||(e.identificationNumber=t),t}),o()(),i(28,"div",15)(29,"label",16),r(30),l(31,"translate"),o(),i(32,"input",17),c("ngModelChange",function(t){return m(e.companyName,t)||(e.companyName=t),t}),o()()(),i(33,"div",10)(34,"div",11)(35,"label",18),r(36),l(37,"translate"),i(38,"span",13),r(39,"*"),o()(),i(40,"input",19),c("ngModelChange",function(t){return m(e.firstName,t)||(e.firstName=t),t}),o()(),i(41,"div",11)(42,"label",20),r(43),l(44,"translate"),i(45,"span",13),r(46,"*"),o()(),i(47,"input",21),c("ngModelChange",function(t){return m(e.lastName1,t)||(e.lastName1=t),t}),o()(),i(48,"div",11)(49,"label",22),r(50),l(51,"translate"),o(),i(52,"input",23),c("ngModelChange",function(t){return m(e.lastName2,t)||(e.lastName2=t),t}),o()()(),i(53,"div",10)(54,"div",15)(55,"label",24),r(56),l(57,"translate"),i(58,"span",13),r(59,"*"),o()(),i(60,"input",25),c("ngModelChange",function(t){return m(e.address,t)||(e.address=t),t}),o()(),i(61,"div",11)(62,"label",26),r(63),l(64,"translate"),i(65,"span",13),r(66,"*"),o()(),i(67,"input",27),c("ngModelChange",function(t){return m(e.postalCode,t)||(e.postalCode=t),t}),o()()(),i(68,"div",10)(69,"div",11)(70,"label",28),r(71),l(72,"translate"),i(73,"span",13),r(74,"*"),o()(),i(75,"input",29),c("ngModelChange",function(t){return m(e.city,t)||(e.city=t),t}),o()(),i(76,"div",11)(77,"label",30),r(78),l(79,"translate"),i(80,"span",13),r(81,"*"),o()(),i(82,"input",31),c("ngModelChange",function(t){return m(e.country,t)||(e.country=t),t}),o()()(),i(83,"div",10)(84,"div",11)(85,"label",32),r(86),l(87,"translate"),o(),i(88,"input",33),c("ngModelChange",function(t){return m(e.phoneFixed,t)||(e.phoneFixed=t),t}),o()(),i(89,"div",11)(90,"label",34),r(91),l(92,"translate"),i(93,"span",13),r(94,"*"),o()(),i(95,"input",35),c("ngModelChange",function(t){return m(e.phoneMobile,t)||(e.phoneMobile=t),t}),o()(),i(96,"div",11)(97,"label",36),r(98),l(99,"translate"),i(100,"span",13),r(101,"*"),o()(),i(102,"input",37),c("ngModelChange",function(t){return m(e.email,t)||(e.email=t),t}),o()()(),i(103,"div",10)(104,"div",11)(105,"label",38),r(106),l(107,"translate"),i(108,"span",13),r(109,"*"),o()(),i(110,"input",39),c("ngModelChange",function(t){return m(e.password,t)||(e.password=t),t}),o()(),i(111,"div",11)(112,"label",40),r(113),l(114,"translate"),l(115,"translate"),i(116,"span",13),r(117,"*"),o()(),i(118,"input",41),c("ngModelChange",function(t){return m(e.confirmPassword,t)||(e.confirmPassword=t),t}),o()()(),i(119,"div",10)(120,"div",15)(121,"label",42),r(122),l(123,"translate"),o(),i(124,"input",43),c("ngModelChange",function(t){return m(e.website,t)||(e.website=t),t}),o()(),i(125,"div",11)(126,"label",44),r(127),l(128,"translate"),o(),i(129,"select",45),c("ngModelChange",function(t){return m(e.plCode,t)||(e.plCode=t),t}),i(130,"option",46),r(131),l(132,"translate"),o(),M(133,Q,2,3,"option",47),o()()(),i(134,"div",48)(135,"div",49)(136,"input",50),c("ngModelChange",function(t){return m(e.acceptTerms,t)||(e.acceptTerms=t),t}),o(),i(137,"label",51),r(138),l(139,"translate"),i(140,"span",52),r(141),l(142,"translate"),o()()()(),i(143,"div",53)(144,"button",54),w("click",function(){return e.cancel()}),r(145),l(146,"translate"),o(),i(147,"button",55),w("click",function(){return e.onSubmit()}),M(148,U,3,3,"span",56)(149,X,3,3,"span",56),o()()()()),h&2&&(n(4),_(" ",e.externalOption==="outsourcing"?"registration.clientTitle":s(5,72,"registration.professionalTitle")," "),n(2),a("ngIf",e.errorMessage),n(3),a("value","outsourcing"),g("ngModel",e.externalOption),a("disabled",!0),n(2),C("",s(12,74,"externalization")," - ",s(13,76,"outsourcing"),""),n(4),a("value","insourcing"),g("ngModel",e.externalOption),a("disabled",!0),n(2),C("",s(18,78,"escuelaCliente")," - ",s(19,80,"insourcing"),""),n(6),d(s(24,82,"registration.identification")),n(4),g("ngModel",e.identificationNumber),a("disabled",e.isLoading),n(3),d(s(31,84,"registration.companyName")),n(2),g("ngModel",e.companyName),a("disabled",e.isLoading),n(4),d(s(37,86,"registration.firstName")),n(4),g("ngModel",e.firstName),a("disabled",e.isLoading),n(3),d(s(44,88,"registration.lastName1")),n(4),g("ngModel",e.lastName1),a("disabled",e.isLoading),n(3),d(s(51,90,"registration.lastName2")),n(2),g("ngModel",e.lastName2),a("disabled",e.isLoading),n(4),d(s(57,92,"registration.address")),n(4),g("ngModel",e.address),a("disabled",e.isLoading),n(3),d(s(64,94,"registration.postalCode")),n(4),g("ngModel",e.postalCode),a("disabled",e.isLoading),n(4),d(s(72,96,"registration.city")),n(4),g("ngModel",e.city),a("disabled",e.isLoading),n(3),d(s(79,98,"registration.country")),n(4),g("ngModel",e.country),a("disabled",e.isLoading),n(4),d(s(87,100,"registration.phoneFixed")),n(2),g("ngModel",e.phoneFixed),a("disabled",e.isLoading),n(3),d(s(92,102,"registration.phoneMobile")),n(4),g("ngModel",e.phoneMobile),a("disabled",e.isLoading),n(3),d(s(99,104,"registration.email")),n(4),g("ngModel",e.email),a("disabled",e.isLoading),n(4),d(s(107,106,"password")),n(4),g("ngModel",e.password),a("disabled",e.isLoading),n(3),C("",s(114,108,"password")," (",s(115,110,"registration.confirm"),")"),n(5),g("ngModel",e.confirmPassword),a("disabled",e.isLoading),n(4),d(s(123,112,"registration.website")),n(2),g("ngModel",e.website),a("disabled",e.isLoading),n(3),d(s(128,114,"registration.plCode")),n(2),g("ngModel",e.plCode),a("disabled",e.isLoading),n(2),d(s(132,116,"registration.plCodeSelect")),n(2),a("ngForOf",e.plCodes),n(3),g("ngModel",e.acceptTerms),a("disabled",e.isLoading),n(2),_("",s(139,118,"registration.acceptTerms")," "),n(3),d(s(142,120,"registration.lopd")),n(3),a("disabled",e.isLoading),n(),d(s(146,122,"registration.cancel")),n(2),a("disabled",e.isLoading),n(),a("ngIf",!e.isLoading),n(),a("ngIf",e.isLoading))},dependencies:[L,O,N,j,q,V,k,R,A,D,F,z,T,J,H],styles:[".register-container[_ngcontent-%COMP%]{width:100%;min-height:100vh;background-color:#a7e0ff;font-family:Lexend Peta,sans-serif;padding-top:120px;padding-bottom:40px;color:#204376}.register-content[_ngcontent-%COMP%]{width:90%;max-width:1200px;margin:0 auto;background-color:#a7e0ff;padding:2rem;border-radius:10px}.title[_ngcontent-%COMP%]{text-align:left;font-size:2rem;margin-bottom:2rem;font-weight:700;color:#204376}.client-type-selector[_ngcontent-%COMP%]{display:flex;margin-bottom:2rem;gap:2rem}.radio-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.radio-group[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:20px;height:20px}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{flex:1;min-width:250px}.form-group.wide[_ngcontent-%COMP%]{flex:2;min-width:400px}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:1rem;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:.7rem;border:none;border-radius:5px;font-size:1rem;background-color:#fff;font-family:Lexend Peta,sans-serif}.terms-container[_ngcontent-%COMP%]{margin:2rem 0}.terms-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.terms-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px}.lopd-text[_ngcontent-%COMP%]{color:red;font-weight:400}.button-container[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-start;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:30px;font-size:1rem;cursor:pointer;transition:all .3s ease;font-family:Lexend Peta,sans-serif;font-weight:500}.btn-cancel[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#204376}.btn-register[_ngcontent-%COMP%]{background-color:#004aad;color:#fff}.btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 768px){.register-content[_ngcontent-%COMP%]{width:95%;padding:1.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem}.form-group[_ngcontent-%COMP%], .form-group.wide[_ngcontent-%COMP%]{min-width:100%}.client-type-selector[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.button-container[_ngcontent-%COMP%]{flex-direction:column;width:100%}.btn[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{background-color:#ff00001a;color:#c00;padding:1rem;border-radius:5px;margin-bottom:1.5rem;font-size:.9rem;border-left:4px solid #cc0000}.required[_ngcontent-%COMP%]{color:#c00;margin-left:4px}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f1f1;opacity:.8}}","@import url('https://fonts.googleapis.com/css2?family=Lexend+Peta:wght@100..900&display=swap');"],changeDetection:0})}return f})();export{pe as RegisterComponent};
