import{b as B,c as E,d as A,i as z}from"./chunk-7HG5OZWZ.js";import{a as T,b as U,c as D}from"./chunk-UBC5WSKD.js";import{E as e,I as M,J as p,L as t,M as n,N as P,R as f,T as r,U as a,Y as h,Z as b,_ as C,aa as y,ca as s,da as l,ha as x,ma as v,oa as w,p as g,r as _,ta as S,va as O,wa as L,ya as k,za as I}from"./chunk-NQECP3SB.js";function R(d,W){d&1&&(t(0,"span"),r(1),s(2,"translate"),n()),d&2&&(e(),a(l(2,1,"enter")))}function j(d,W){d&1&&(t(0,"span"),r(1,"Loading..."),n())}var te=(()=>{class d{email="";password="";errorMessage="";successMessage="";isLoading=!1;langSubscription=null;loadedSubscription=null;returnUrl="/";translationService=g(T);authService=g(I);router=g(O);route=g(S);cdr=g(x);ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.route.snapshot.queryParams.registered==="success"&&this.cdr.detectChanges(),this.authService.getCurrentUser().subscribe(o=>{o&&this.router.navigateByUrl(this.returnUrl)}),this.langSubscription=this.translationService.getCurrentLang().subscribe(()=>{console.log("Auth component detected language change"),this.cdr.detectChanges()}),this.loadedSubscription=this.translationService.isTranslationsLoaded().subscribe(o=>{o&&(console.log("Auth component detected translations loaded"),this.cdr.detectChanges())}),this.authService.checkServer().subscribe({next:()=>{console.log("Server connection successful")},error:o=>{console.error("Server connection failed:",o),this.errorMessage="Cannot connect to server. Please try again later.",this.cdr.detectChanges()}})}login(){if(!this.email||!this.password){this.errorMessage="Please enter both email and password",this.cdr.detectChanges();return}this.isLoading=!0,this.errorMessage="",this.successMessage="",this.cdr.detectChanges(),this.authService.login(this.email,this.password).subscribe({next:o=>{console.log("Login successful",o),this.isLoading=!1,this.router.navigateByUrl(this.returnUrl)},error:o=>{console.error("Login failed",o),this.isLoading=!1,this.errorMessage=o.error?.error||"Login failed. Please check your credentials.",this.cdr.detectChanges()}})}ngOnDestroy(){this.langSubscription&&this.langSubscription.unsubscribe(),this.loadedSubscription&&this.loadedSubscription.unsubscribe()}static \u0275fac=function(m){return new(m||d)};static \u0275cmp=_({type:d,selectors:[["app-auth"]],standalone:!0,features:[y],decls:42,vars:35,consts:[[1,"auth-container"],[1,"login-section"],[1,"title"],[1,"form-group"],["for","email"],["type","email","id","email","name","email",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"forgot-password"],["href","#"],[1,"button-group"],[1,"btn","btn-normal",3,"click","disabled"],[4,"ngIf"],["routerLink","/register",1,"btn","btn-normal",3,"disabled"],[1,"image-section"],[1,"buttons-container"],[1,"user-btn","client-btn"],[1,"user-btn","professional-btn"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"]],template:function(m,i){m&1&&(P(0,"app-header"),t(1,"div",0)(2,"div",1)(3,"h1",2),r(4),s(5,"translate"),n(),t(6,"div",3)(7,"label",4),r(8),s(9,"translate"),n(),t(10,"input",5),C("ngModelChange",function(c){return b(i.email,c)||(i.email=c),c}),n()(),t(11,"div",3)(12,"label",6),r(13),s(14,"translate"),n(),t(15,"input",7),C("ngModelChange",function(c){return b(i.password,c)||(i.password=c),c}),f("keyup.enter",function(){return i.login()}),n()(),t(16,"div",8)(17,"a",9),r(18),s(19,"translate"),n()(),t(20,"div",10)(21,"button",11),f("click",function(){return i.login()}),M(22,R,3,3,"span",12)(23,j,2,0,"span",12),n(),t(24,"button",13),r(25),s(26,"translate"),n()()(),t(27,"div",14)(28,"div",15)(29,"button",16),r(30),s(31,"translate"),n(),t(32,"button",17),r(33),s(34,"translate"),n()(),t(35,"div",18)(36,"h1",19),r(37),s(38,"translate"),n(),t(39,"p",20),r(40),s(41,"translate"),n()()()()),m&2&&(e(4),a(l(5,17,"login")),e(4),a(l(9,19,"email")),e(2),h("ngModel",i.email),p("disabled",i.isLoading),e(3),a(l(14,21,"password")),e(2),h("ngModel",i.password),p("disabled",i.isLoading),e(3),a(l(19,23,"forgotPassword")),e(3),p("disabled",i.isLoading),e(),p("ngIf",!i.isLoading),e(),p("ngIf",i.isLoading),e(),p("disabled",i.isLoading),e(),a(l(26,25,"register")),e(5),a(l(31,27,"client")),e(3),a(l(34,29,"professionals")),e(4),a(l(38,31,"title")),e(3),a(l(41,33,"subtitle")))},dependencies:[w,v,z,B,E,A,k,L,D,U],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100%;font-family:Lexend Peta,sans-serif}.login-section[_ngcontent-%COMP%]{width:50%;background:linear-gradient(135deg,#08c,#4db8ff);padding:10% 5%;display:flex;flex-direction:column;color:#204376}.title[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:3rem;color:#204376;font-weight:700;font-family:Lexend Peta,sans-serif}.form-group[_ngcontent-%COMP%]{margin-bottom:2rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:1.2rem;font-family:Lexend Peta,sans-serif}.form-control[_ngcontent-%COMP%]{width:100%;padding:1rem;border:none;border-radius:30px;font-size:1rem;background:#fff;font-family:Lexend Peta,sans-serif}.forgot-password[_ngcontent-%COMP%]{margin-bottom:2rem}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#204376;text-decoration:none;font-family:Lexend Peta,sans-serif}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:2rem;align-items:center}.btn[_ngcontent-%COMP%]{padding:.75rem 2.5rem;border:none;border-radius:30px;font-size:1rem;cursor:pointer;transition:all .3s ease;font-family:Lexend Peta,sans-serif;width:40%;text-align:center}.btn-normal[_ngcontent-%COMP%]{background-color:#fff;color:#06c}.image-section[_ngcontent-%COMP%]{width:50%;position:relative;background-image:url(/assets/swimming-bg.jpg);background-size:cover;background-position:center;display:flex;flex-direction:column;margin-top:10vh}app-header[_ngcontent-%COMP%]{width:100%}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;padding:5%;height:20%}.user-btn[_ngcontent-%COMP%]{flex:1;background-color:#fffc;color:#06c;border:none;font-size:1.8rem;cursor:pointer;font-weight:700;font-family:Lexend Peta,sans-serif;display:flex;justify-content:center;align-items:center;transition:all .3s ease;border-radius:30px;margin:10px}.user-btn[_ngcontent-%COMP%]:hover{background-color:#fff}.client-btn[_ngcontent-%COMP%]{border-right:none}.professional-btn[_ngcontent-%COMP%]{border-left:none}.hero-content[_ngcontent-%COMP%]{position:absolute;bottom:40%;width:100%;text-align:center;color:#fff}.hero-title[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;letter-spacing:5px;font-family:Lexend Peta,sans-serif;font-weight:700}.hero-subtitle[_ngcontent-%COMP%]{font-size:2rem;letter-spacing:2px;font-family:Lexend Peta,sans-serif;font-weight:300}@media (max-width: 768px){.auth-container[_ngcontent-%COMP%]{flex-direction:column}.login-section[_ngcontent-%COMP%], .image-section[_ngcontent-%COMP%]{width:100%}.image-section[_ngcontent-%COMP%]{height:40vh}.hero-content[_ngcontent-%COMP%]{bottom:10%}.hero-title[_ngcontent-%COMP%]{font-size:2.5rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem}.buttons-container[_ngcontent-%COMP%]{flex-direction:column;height:auto}.user-btn[_ngcontent-%COMP%]{padding:1rem}.error-message[_ngcontent-%COMP%]{background-color:#ff00001a;color:#c00;padding:1rem;border-radius:5px;margin-bottom:1.5rem;font-size:.9rem;border-left:4px solid #cc0000}.success-message[_ngcontent-%COMP%]{background-color:#0080001a;color:#060;padding:1rem;border-radius:5px;margin-bottom:1.5rem;font-size:.9rem;border-left:4px solid #006600}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f1f1;opacity:.8}}","@import url('https://fonts.googleapis.com/css2?family=Lexend+Peta:wght@100..900&display=swap');"],changeDetection:0})}return d})();export{te as AuthComponent};
